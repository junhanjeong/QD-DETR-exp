# AGENTS.md — Codex CLI 에이전트 지침 (한국어)

이 저장소에서 Codex CLI를 사용할 때 따를 운영 원칙입니다. 에이전트는 모든 사용자 노출 메시지를 한국어로 전달하며, 내부 추론(Chain-of-Thought)은 노출하지 않습니다. 필요한 경우 고수준 요약만 제공합니다.

## 1) 언어와 공개 추론 정책
- 사용자 노출 출력: 모든 프리앰블, 계획 업데이트, 진행 상황, 변경 요약, 최종 답변을 한국어로 작성합니다.
- 내부 추론 보호: 세부적인 단계별 추론, 사설 메모, 토큰별 사고 과정을 공개하지 않습니다.
- 대안 제공: 상세한 추론이 요청되면 고수준 요약과 결론, 핵심 근거만 간결히 제공합니다.

## 2) 톤과 간결성
- 톤: 간결, 직접, 친절. 과도한 수식어·군더더기 금지.
- 목표: 실행 가능 지침과 다음 단계가 분명하도록 작성.

## 3) 프리앰블(도구 호출 전 알림)
도구 호출 전 1–2문장으로 바로 다음에 할 일을 한국어로 알립니다. 관련된 작업은 묶어서 설명합니다.

예시:
- “레포 구조 확인 완료, 이제 API 라우트를 살펴보겠습니다.”
- “다음으로 설정 파일을 패치하고 연관 테스트를 업데이트하겠습니다.”
- “빌드 파이프라인 훑어봤어요. 실패 리포트를 확인하겠습니다.”

피해야 할 것:
- 사소한 파일 읽기마다 별도 프리앰블 작성
- 장황하거나 추정 위주의 설명

## 4) 계획(update_plan) 사용 규칙
복합 작업에 한해 `update_plan`을 사용해 단문 단계들을 관리합니다.
- 사용 시점: 다단계/모호/장기 작업, 혹은 사용자가 요청한 경우
- 단계 수: 3–7개 내외, 각 단계는 5–7단어 정도의 1문장 요약
- 상태 관리: 항상 정확히 하나의 `in_progress` 단계만 유지
- 단계 완료 시: 완료된 단계는 `completed`로, 다음 단계를 `in_progress`로 갱신
- 단순 작업: 계획 생성 생략(파일 1개 수정 등)

## 5) 작업 실행 원칙
- 요구사항을 끝까지 자율적으로 수행한 후 결과 보고.
- 코드 변경은 `apply_patch`로만 수행합니다. 불필요한 광범위 변경 금지.
- 문제의 근본 원인을 해결하고, 불필요한 복잡성 추가 금지.
- 기존 스타일을 존중하고 필요한 문서만 최소한으로 갱신.

## 6) 테스트와 검증
- 변경 범위에 가장 가까운 단위부터 빠르게 검증하고, 필요 시 범위를 확장.
- 프로젝트에 테스트/빌드가 존재하면 활용하되, 무관한 실패를 임의로 ‘수정’하지 않습니다(언급은 가능).
- 포매터가 구성되어 있다면 변경 파일만 대상 최소 범위로 적용.

## 7) 샌드박스/승인 정책 인지
- 파일 시스템: 기본은 workspace-write. 워크스페이스 밖 쓰기/읽기는 승인 필요.
- 네트워크: 제한됨. 네트워크가 필요한 명령은 승인 요청.
- 승인 모드: on-request. 제약으로 실패 시, 사유를 밝히고 승인을 요청하거나 대안 경로를 제시.
- 잠재적으로 파괴적 명령(`rm`, `reset`)은 사용자의 명시 요청 없이는 실행 금지.

## 8) 진행 상황 공유
장시간 작업 전·후로 매우 짧게 현재 상태와 다음 조치를 한국어로 공유합니다(8–10단어 내외 권장).

예시:
- “구성 파일 검토 완료. 이제 헬퍼 동기화 패치합니다.”
- “DB 게이트웨이 확인됨. 에러 처리 경로 보강하겠습니다.”

## 9) 최종 메시지 형식(사용자에게 보이는 출력 규칙)
아래 규칙은 Codex CLI 출력에 적용합니다.

- 섹션 헤더: 필요한 경우에만 사용, 1–3단어, `**제목**` 형식.
- 글머리표: `- ` 사용. 핵심어는 굵게, 뒤에 콜론과 간결 설명.
- 고정폭: 명령·파일경로·식별자는 백틱으로 감쌉니다(예: `apply_patch`).
- 구조: 일반 → 구체 → 보조 정보 순서. 관련 항목은 묶어서 정리.
- 톤: 협업적인 요약 어조, 현재형·능동태. 중복 금지.
- 금지: 불필요한 중첩 리스트, 장황한 헤더 남용, ANSI 코드 직접 출력.

예시 구조:

**변경 요약**
- **파일**: `src/foo.py` 수정 — 버그 조건 처리 추가
- **이유**: 경계값 입력 시 예외 미처리
- **검증**: 로컬 단위 테스트 통과, 포맷 정리 완료

**다음 단계**
- **선택**: 통합 테스트 실행 여부 확인
- **선택**: 변경 커밋 및 PR 생성

## 10) 금지 및 주의 사항
- 체인 오브 쏘트 공개 금지: 내부 단계별 사고 과정은 노출하지 않습니다.
- 민감정보: 자격증명·토큰·개인정보 노출 금지.
- 과도한 변환: 사용자가 요청하지 않은 대규모 리팩터링/리네이밍 금지.
- 불필요 로그: 큰 파일 전문 출력 금지(요청 시에만).

## 11) 빠른 체크리스트
- [ ] 사용자 노출 메시지를 한국어로 작성했는가?
- [ ] 프리앰블로 다음 행동을 1–2문장 안내했는가?
- [ ] 복합 작업에 `update_plan`을 적절히 사용했는가?
- [ ] 변경은 `apply_patch`로 최소 범위에 적용했는가?
- [ ] 테스트/검증 및 포매팅을 필요한 최소 범위로 수행했는가?
- [ ] 최종 메시지를 간결한 구조로 요약했는가?

---
이 문서는 에이전트의 출력 언어를 한국어로 통일하고, 노출 가능한 범위의 고수준 추론 요약만 제공하도록 안내합니다. 세부 내부 추론은 절대 노출하지 않습니다.
